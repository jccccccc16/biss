### 开发日志

#### 1.日志系统

版本id: 857b35d9ef03e7b5ce24f8cec287df645d57c259

完成日志系统，用户的操作会被系统记录到数据库中

#### 2.重新完善项目审核

**增加审核表**，记录该项目由哪一位审核员审核

审核项目展示VO，增加审核员用户名

在项目管理中也显示审核员用户名

1.在getProjectTemp（）获取待审核的方法中，用于前端显示的vo是ProjectReview，现在需要对projectReview增加一个审核员用户名

2.在显示项目详情方法中getReviewProjectDetail，也显示审核员，而无论是项目管理中显示或者项目审核中显示







**修改vo，修改mapper.xml，修改前端**



审核表的状态废除，仍然使用project表中的状态，审核表仅提供审核员，项目，审核理由，审核时间等等



- [x] 修改了日志操作以时间倒序排序



- [x] 修复了时间格式为24小时



- [x] 修复项目审核

状态统一使用project表中的状态，审核表中的状态暂时不用

如果是第一次审核直接插入审核表，修改项目状态

如果是二次审核的话，查询出根据项目id，查询review_project_admin，判断是否是二次审核，修改审核状态，修改审核员，



修复了日志查询可以按照关键词查询，以及查询分页



#### 3.定时任务

分支为：branch_scheduled_check_project

每天凌晨对项目进行判断是否超过众筹期限,

使用定时任务，当超过众筹期限时，将众筹的项目状态修改为众筹失败

spring定时任务模块：

资料参考： https://www.cnblogs.com/zhaoletian/p/10821426.html





- [x] 修改了bug

  当通过审核时插入众筹发起时间，众筹发起时间和众筹天数用于判断项目是否过期



### 遇到的难题记录

使用自定义注解开发一个标注需要被日志记录的方法时，这是我的第一版本的注解

```java
@Target({ElementType.METHOD, ElementType.TYPE})
@Documented
public @interface BusinessType {
    String value();
}

```

在aop开发中一直获取不到方法的注解，后来才发现需要配置@Retention(RetentionPolicy.RUNTIME)，表名注解在运行时有效

